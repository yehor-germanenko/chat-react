(this["webpackJsonpchat-react"]=this["webpackJsonpchat-react"]||[]).push([[0],{124:function(e,t,a){},139:function(e,t,a){e.exports=a.p+"static/media/wolf.bbf5793f.png"},140:function(e,t,a){e.exports=a.p+"static/media/send.9ce3a472.svg"},169:function(e,t,a){e.exports=a(332)},174:function(e,t,a){},175:function(e,t,a){},197:function(e,t,a){},23:function(e,t,a){e.exports={formControl:"FormsControls_formControl__OoRkY",error:"FormsControls_error__lg4Vd",formSummaryError:"FormsControls_formSummaryError__Hw1WP"}},28:function(e,t,a){e.exports={container:"Preloader_container__Cw-a-",dash:"Preloader_dash__1h7Qt",uno:"Preloader_uno__1TVSB",spin:"Preloader_spin__1F8G3",dos:"Preloader_dos__AGrhD",spin2:"Preloader_spin2__3PLto",tres:"Preloader_tres__38hsA",spin3:"Preloader_spin3__2jk4J",cuatro:"Preloader_cuatro__1UU3-",spin4:"Preloader_spin4__1HMYg"}},296:function(e,t,a){},297:function(e,t,a){},298:function(e,t,a){},332:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(62),s=a.n(o),i=(a(174),a(7)),c=a(8),l=a(10),m=a(9),u=(a(175),a(14)),d=a(132),p=a(133),h=a(93),f=a(23),g=a.n(f),v=a(135),_=a(136),E=function(e){e.input;var t=e.meta,a=(e.child,Object(h.a)(e,["input","meta","child"])),r=t.touched&&t.error;return n.a.createElement("div",{className:g.a.formControl+" "+(r?g.a.error:"")},n.a.createElement("div",null,a.children),r&&n.a.createElement("span",null,n.a.createElement(v.a,{icon:_.a})," ",t.error))},b=function(e){var t=e.input,a=(e.meta,e.child,Object(h.a)(e,["input","meta","child"]));return n.a.createElement(E,e,n.a.createElement("input",Object.assign({},t,a)))},O=function(e){if(!e)return"Field is required"},N=function(e,t){return function(a){if(a.length<e||a.length>t)return"length should be ".concat(e," to ").concat(t)}},j=function(e){if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e))return"Invalid email address"},A=a(12),S=a(13),R=a(86),y=function(e){return R.create({baseURL:"https://animals-chat.herokuapp.com/",headers:{"API-KEY":"3deb2104-0a97-4a6b-8b77-4ec1374c2ee9",Authorization:"Bearer "+e}})},w=R.create({baseURL:"https://animals-chat.herokuapp.com/",headers:{"API-KEY":"3deb2104-0a97-4a6b-8b77-4ec1374c2ee9"}}),C=function(){return y(localStorage.token).get("auth/me")},k=function(e,t,a){return w.post("auth/login",{email:e,password:t,rememberMe:a})},U=function(e,t,a){return w.post("users/create",{name:e,email:t,password:a})},I=function(){return y(localStorage.token).delete("users/delete")},T=function(){return y(localStorage.token).post("refresh")},F=function(){return y(localStorage.token).get("profile")},P=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return y(localStorage.token).patch("profile/update",{name:e,email:t,password:a,newPassword:r})},M=function(e){return y(localStorage.token).post("rooms",{name:e})},z=function(e,t){return y(localStorage.token).post("rooms/".concat(e,"/messages"),{message:t})},D=function(e,t){return y(localStorage.token).post("rooms/".concat(e,"/users/add"),{name:t})},x=function(e,t){return console.log(t),y(localStorage.token).post("/rooms/".concat(e,"/users/remove"),{name:t})},G=function(){return y(localStorage.token).get("/rooms")},L=function(e){return y(localStorage.token).get("/rooms/".concat(e,"/messages"))},W=a(17),X=function(){T().then((function(e){localStorage.setItem("token",e.data.token)}))},V={initialized:!1},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(S.a)(Object(S.a)({},e),{},{initialized:!0});default:return e}},Z={userId:null,name:null,avatar:null,isAuth:!1,isFetching:!1},H=function(e){return{type:"TOGGLE_GET_AUTH_DATA_PROGRESS",isFetching:e}},Y=function(){return function(e){if(localStorage.getItem("token"))return C().then((function(t){X();var a=t.data.user,r=a.id,n=a.name,o=a.avatar;e(function(e,t,a,r){return{type:"SET_USER_DATA",payload:{userId:e,name:t,avatar:a,isAuth:r}}}(r,n,o,!0))})).catch((function(e){console.log(e.response)}))}},J=function(){return function(e){e({type:"LOGOUT"}),e({type:"INITIALIZED_SUCCESS"}),localStorage.removeItem("token")}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(S.a)(Object(S.a)({},e),t.payload);case"TOGGLE_GET_AUTH_DATA_PROGRESS":return Object(S.a)(Object(S.a)({},e),{},{isFetching:t.isFetching});default:return e}},$=a(15),q=(a(197),Object(p.a)({form:"login"})((function(e){return n.a.createElement("form",{onSubmit:e.handleSubmit},n.a.createElement("div",{className:"authorization-registration__input"},n.a.createElement(d.a,{placeholder:"Email",name:"email",type:"email",validate:[O],component:b})),n.a.createElement("div",{className:"authorization-registration__input"},n.a.createElement(d.a,{placeholder:"Password",name:"password",type:"password",validate:[O],component:b})),e.error&&n.a.createElement("div",{className:g.a.formSummaryError},e.error),n.a.createElement("div",{className:"authorization-registration__remember-me"},n.a.createElement(d.a,{component:b,name:"rememberMe",type:"checkbox",id:"remember"}),n.a.createElement("label",{for:"remember"},"Remember me")),n.a.createElement("div",{className:"authorization-registration__buttons"},n.a.createElement("button",{disabled:e.isFetching},"Login"),n.a.createElement($.b,{to:"/register",className:"authorization-registration__buttons-sign-up beauty-button"},"Sign Up")))}))),Q=Object(A.b)((function(e){return{isAuth:e.auth.isAuth,isFetching:e.auth.isFetching}}),{login:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r){r(H(!0)),k(e,t,a).then((function(e){localStorage.setItem("token",e.data.token),r(H(!1)),r(Y())})).catch((function(e){r(H(!1));var t=e.response.data.errors.length>0?e.response.data.errors[0]:"Some error";r(Object(W.b)("login",{_error:t}))}))}}})((function(e){return e.isAuth?n.a.createElement(u.a,{to:"/dialogs"}):n.a.createElement("div",{className:"authorization-registration"},n.a.createElement("div",{className:"authorization-registration__logo"},n.a.createElement("img",{src:"https://www.pngkit.com/png/full/373-3738572_pictures-of-animals-animals-for-logo-png.png",alt:"wolf logo"})),n.a.createElement("div",{className:"authorization-registration__form"},n.a.createElement("div",{className:"authorization-registration__form-wrapper"},n.a.createElement("div",{className:"authorization-registration__info"},n.a.createElement("h1",null,"Animal's Chat"),n.a.createElement("p",null,"Welcome Back, Please login to your account.")),n.a.createElement(q,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)},isFetching:e.isFetching}))))})),ee=(a(296),N(6,47)),te=N(3,20),ae=Object(p.a)({form:"register"})((function(e){return n.a.createElement("form",{Submit:e.handleSubmit},n.a.createElement("div",{class:"authorization-registration__input"},n.a.createElement(d.a,{placeholder:"Name",name:"name",type:"text",validate:[O,te],component:b})),n.a.createElement("div",{class:"authorization-registration__input"},n.a.createElement(d.a,{placeholder:"Email",name:"email",type:"email",validate:[O,j],component:b})),n.a.createElement("div",{class:"authorization-registration__input"},n.a.createElement(d.a,{placeholder:"Password",name:"password",type:"password",validate:[O,ee],component:b})),e.error&&n.a.createElement("div",{className:g.a.formSummaryError},e.error),n.a.createElement("div",{style:{justifyContent:"center"},class:"authorization-registration__buttons"},n.a.createElement("button",null,"Sign Up")),n.a.createElement($.b,{to:"/",class:"authorization-registration__back-to-sign-in"},"Already have an account? Sign in."))})),re=Object(A.b)((function(e){return{isAuth:e.auth.isAuth,isFetching:e.auth.isFetching}}),{register:function(e,t,a){return function(r){localStorage.removeItem("token"),r(H(!0)),U(e,t,a).then((function(e){localStorage.setItem("token",e.data.token),r(H(!1)),r(Y())})).catch((function(e){r(H(!1));var t=e.response.data.errors.length>0?e.response.data.errors[0]:"Some error";r(Object(W.b)("register",{_error:t}))}))}}})((function(e){return e.isAuth?n.a.createElement(u.a,{to:"/profile"}):n.a.createElement("div",{className:"authorization-registration"},n.a.createElement("div",{className:"authorization-registration__logo"},n.a.createElement("img",{src:"https://www.pngkit.com/png/full/373-3738572_pictures-of-animals-animals-for-logo-png.png",alt:"wolf logo"})),n.a.createElement("div",{className:"authorization-registration__form"},n.a.createElement("div",{className:"authorization-registration__form-wrapper"},n.a.createElement("div",{className:"authorization-registration__info"},n.a.createElement("h1",null,"Animal's Chat"),n.a.createElement("p",null,"Welcome, Please sign up your account.")),n.a.createElement(ae,{onSubmit:function(t){e.register(t.name,t.email,t.password)}}))))})),ne=(a(297),function(e){return n.a.createElement("div",{className:"profile"},n.a.createElement("div",{className:"profile__body"},n.a.createElement("div",{className:"profile__avatar"},n.a.createElement("img",{src:e.avatar,alt:"ava"})),n.a.createElement("div",{className:"profile__info"},n.a.createElement("p",{className:"profile__info-name"},"User info"),n.a.createElement("div",{className:"profile__info-item"},n.a.createElement("span",null,"Name:"),n.a.createElement("p",null,e.name)),n.a.createElement("div",{className:"profile__info-item"},n.a.createElement("span",null,"Email:"),n.a.createElement("p",null,e.email))),n.a.createElement("div",{className:"profile__buttons"},n.a.createElement($.b,{to:"profile/edit"},"Edit Profile"),n.a.createElement("div",{onClick:function(){return e.logout()}},"Log Out"))))}),oe=function(e){return{isAuth:e.auth.isAuth}},se=function(e){var t=function(t){Object(l.a)(r,t);var a=Object(m.a)(r);function r(){return Object(i.a)(this,r),a.apply(this,arguments)}return Object(c.a)(r,[{key:"render",value:function(){return this.props.isAuth?n.a.createElement(e,this.props):n.a.createElement(u.a,{to:"/"})}}]),r}(n.a.Component);return Object(A.b)(oe)(t)},ie=a(5),ce={id:null,name:null,email:null,avatar:null,isFetching:!1},le=function(e){return{type:"SET_USER_PROFILE",profile:e}},me=function(e){return{type:"TOGGLE_GET_DATA_PROGRESS",isFetching:e}},ue=function(){return function(e){F().then((function(t){X(),e(le(t.data.user))}))}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STATUS":return Object(S.a)(Object(S.a)({},e),{},{status:t.status});case"SET_USER_PROFILE":return Object(S.a)(Object(S.a)({},e),{},{id:t.profile.id,name:t.profile.name,email:t.profile.email,avatar:t.profile.avatar});case"UPDATE_PROFILE_DATA":return Object(S.a)(Object(S.a)({},e),{},{name:t.profile.name,email:t.profile.email});case"TOGGLE_GET_DATA_PROGRESS":return Object(S.a)(Object(S.a)({},e),{},{isFetching:t.isFetching});default:return e}},pe=(a(298),a(139)),he=a.n(pe),fe=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).logout=function(){return e.props.logout()},e}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"nav"},n.a.createElement("div",{className:"header__logo header__item"},n.a.createElement($.b,{to:"/dialogs"},n.a.createElement("div",null,n.a.createElement("img",{src:he.a,alt:"logo wolf"})),n.a.createElement("div",{className:"header__logo-name header__text"},"Animal's ",n.a.createElement("span",null,"chat")))),n.a.createElement("div",{className:"header__profile header__item"},n.a.createElement($.b,{to:"/profile"},n.a.createElement("div",{className:"header__profile-name header__text"},this.props.userName),n.a.createElement("div",null,n.a.createElement("img",{src:this.props.avatar,alt:"ava"})))))))}}]),a}(n.a.Component),ge=Object(ie.compose)(Object(A.b)((function(e){return{userName:null===e.profile.name?e.auth.name:e.profile.name,avatar:null===e.profile.avatar?e.auth.avatar:e.profile.avatar,isAuth:e.auth.isAuth}}),{logout:J}),se)(fe),ve=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.getUserData()}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(ge,null),n.a.createElement(ne,{id:this.props.id,name:this.props.name,email:this.props.email,avatar:this.props.avatar,logout:this.props.logout}))}}]),a}(n.a.Component),_e=Object(ie.compose)(Object(A.b)((function(e){return{id:e.profile.id,name:e.profile.name,email:e.profile.email,avatar:e.profile.avatar}}),{getUserData:ue,logout:J,getAuthUserData:Y}),se)(ve),Ee=(a(124),N(3,20)),be=Object(p.a)({form:"update_user_data"})((function(e){return n.a.createElement("form",{className:"edit-form__form",onSubmit:e.handleSubmit},n.a.createElement("div",{className:"edit-form__form-input"},n.a.createElement(d.a,{placeholder:"New name",name:"name",validate:[O,Ee],component:b,size:"40"})),n.a.createElement("div",{className:"edit-form__form-input"},n.a.createElement(d.a,{placeholder:"New email",name:"email",validate:[O,j],component:b,size:"40"})),n.a.createElement("div",{className:"edit-form__form-input"},n.a.createElement(d.a,{placeholder:"password",name:"password",type:"password",validate:[O],component:b,size:"40"})),e.error&&n.a.createElement("div",{className:g.a.formSummaryError},e.error),n.a.createElement("button",{className:"edit-form__button",disabled:e.isFetching},"Save"))})),Oe=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={redirect:!1},e.initialValues={name:e.props.name,email:e.props.email},e.Redirect=function(){e.setState({redirect:!0})},e.onSubmit=function(t){e.props.updateData(t.name,t.email,t.password,e.Redirect)},e}return Object(c.a)(a,[{key:"render",value:function(){return this.state.redirect?n.a.createElement(u.a,{to:"/profile"}):n.a.createElement("div",null,n.a.createElement(be,{onSubmit:this.onSubmit,initialValues:this.initialValues,isFetching:this.props.isFetching}))}}]),a}(n.a.Component),Ne=N(6,47),je=N(3,20),Ae=Object(p.a)({form:"update_user_password"})((function(e){return n.a.createElement("form",{className:"edit-form__form",onSubmit:e.handleSubmit},n.a.createElement("div",{className:"edit-form__form-input"},n.a.createElement(d.a,{placeholder:"New name",name:"name",validate:[O,je],component:b,size:"40"})),n.a.createElement("div",{className:"edit-form__form-input"},n.a.createElement(d.a,{placeholder:"New email",name:"email",validate:[O,j],component:b,size:"40"})),n.a.createElement("div",{className:"edit-form__form-input"},n.a.createElement(d.a,{placeholder:"Current password",name:"old_password",type:"password",validate:[O,Ne],component:b,size:"40"})),n.a.createElement("div",{className:"edit-form__form-input"},n.a.createElement(d.a,{placeholder:"New password",name:"new_password",type:"password",validate:[O,Ne],component:b,size:"40"})),e.error&&n.a.createElement("div",{className:g.a.formSummaryError},e.error),n.a.createElement("button",{className:"edit-form__button"},"Save"))})),Se=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={redirect:!1},e.initialValues={name:e.props.name,email:e.props.email},e.Redirect=function(){e.setState({redirect:!0})},e.onSubmit=function(t){e.props.updatePassword(t.name,t.email,t.old_password,t.new_password,e.Redirect)},e}return Object(c.a)(a,[{key:"render",value:function(){return this.state.redirect?n.a.createElement(u.a,{to:"/profile"}):n.a.createElement("div",null,n.a.createElement(Ae,{onSubmit:this.onSubmit,initialValues:this.initialValues}))}}]),a}(n.a.Component),Re=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={passw:!1},e.addPasssw=function(){e.passw||e.setState({passw:!0})},e.deleteUser=function(){e.props.deleteUser(),e.props.logout()},e}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"edit-form__wrapper"},n.a.createElement("div",{className:"edit-form"},n.a.createElement($.b,{className:"edit-form__back-button",to:"/profile"},n.a.createElement("span",null)),n.a.createElement("h1",null,"Edit Mode"),!this.state.passw&&n.a.createElement("div",null,n.a.createElement(Oe,{name:this.props.name,email:this.props.email,updateData:this.props.updateData}),n.a.createElement("button",{className:"edit-form__button",onClick:this.addPasssw},"Change password")),this.state.passw&&n.a.createElement(Se,{name:this.props.name,email:this.props.email,updatePassword:this.props.updatePassword}),n.a.createElement("div",{className:"edit-form__delete-profile-button edit-form__button",onClick:this.deleteUser},"Delete Profile")))}}]),a}(n.a.Component),ye=Object(ie.compose)(Object(A.b)((function(e){return{name:e.profile.name,email:e.profile.email,isAuth:e.auth.isAuth,isFetching:e.profile.isFetching}}),{getUserData:ue,updateData:function(e,t,a,r){return function(n){n(me(!0)),P(e,t,a).then((function(){X(),n(me(!1)),r(),n(le(e))})).catch((function(e){X(),n(me(!1));var t=e.response.data.errors.length>0?e.response.data.errors:"Some error";n(Object(W.b)("update_user_data",{_error:t}))}))}},updatePassword:function(e,t,a,r,n){return function(o){o(me(!0)),P(e,t,a,r).then((function(){X(),o(me(!1)),n(),o(le(e))})).catch((function(e){X(),o(me(!1));var t=e.response.data.errors.length>0?e.response.data.errors[0]:"Some error";o(Object(W.b)("update_user_password",{_error:t}))}))}},deleteUser:function(){return function(){I().catch((function(e){console.log(e.response)})),J()}},logout:J}),se)(Re),we=a(27),Ce=a(92),ke={rooms:[],messages:[],currentRoomId:null,currentRoomName:null},Ue=function(e,t){return{type:"SET_CURRENT_ROOM",roomId:e,roomName:t}},Ie=function(e,t){return function(){x(e,t).then(X()).catch((function(e){console.log(e.response)}))}},Te=function(e,t){return function(){z(e,t).then(X()).catch((function(e){console.log(e.response)}))}},Fe=function(){return function(e){G().then((function(t){e({type:"SET_ALL_ROOMS",rooms:t.data})})).catch((function(e){console.log(e)}))}},Pe=function(e){return function(t){L(e).then((function(e){t({type:"SET_MESSAGES",messages:e.data.message})})).catch((function(e){console.log(e.response)}))}},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ALL_ROOMS":return Object(S.a)(Object(S.a)({},e),{},{rooms:Object(Ce.a)(t.rooms)});case"SET_MESSAGES":return Object(S.a)(Object(S.a)({},e),{},{messages:Object(Ce.a)(t.messages)});case"SET_CURRENT_ROOM":return Object(S.a)(Object(S.a)({},e),{},{currentRoomId:t.roomId,currentRoomName:t.roomName});default:return e}},ze=(a(36),function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={name:"",activeMobileEdit:!1},r.toggleActiveMobileEdit=r.toggleActiveMobileEdit.bind(Object(we.a)(r)),r.handleChange=r.handleChange.bind(Object(we.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(we.a)(r)),r}return Object(c.a)(a,[{key:"handleChange",value:function(e){e.preventDefault(),this.setState({name:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.addRoom(this.state.name),this.toggleActiveMobileEdit(),this.setState({name:""})}},{key:"toggleActiveMobileEdit",value:function(){this.setState((function(e){return{activeMobileEdit:!e.activeMobileEdit}}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"dialogs__create-room"},n.a.createElement("form",{className:this.state.activeMobileEdit?"dialogs__create-room-form dialogs__create-room-form_active":"dialogs__create-room-form",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"dialogs__create-room-wrapper"},n.a.createElement("div",{className:"dialogs__create-room-input space"},n.a.createElement("input",{type:"text",value:this.state.name,onChange:this.handleChange,placeholder:"Enter room name"})),n.a.createElement("div",{className:"dialogs__create-room-button space"},n.a.createElement("button",{type:"submit"},"ADD")),n.a.createElement("div",{onClick:this.toggleActiveMobileEdit,className:"pop-up-buttonX buttonX control-button space",id:"buttonXCreateRoom"},n.a.createElement("span",null)))),n.a.createElement("div",{className:"dialogs__create-room-button-sm space",id:"createRoomButton",onClick:this.toggleActiveMobileEdit},"Create room"),n.a.createElement("div",{onClick:this.props.toggleActiveclassNameRooms,className:"dialogs__header-buttonX buttonX control-button space",id:"buttonXRooms"},n.a.createElement("span",null)))}}]),a}(n.a.Component)),De=a(91),xe=Object(De.a)((function(e){return e.dialogs.rooms}),(function(e){return e})),Ge=Object(De.a)((function(e){return e.dialogs.messages}),(function(e){return e})),Le=a(140),We=a.n(Le),Xe=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={roomId:e.props.roomId,text:""},e.UNSAFE_componentWillReceiveProps=function(t){e.setState({roomId:t.roomId})},e.handleChange=function(t){t.preventDefault(),e.setState({text:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),0!==e.state.text.length&&(console.log("send "+e.state.roomId),e.props.addMessage(e.props.roomId,e.state.text),e.setState({text:""}))},e}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"dialogs__input-message"},n.a.createElement("form",{className:"dialogs__input-message-wrapper",onSubmit:this.handleSubmit},n.a.createElement("input",{onChange:this.handleChange,value:this.state.text,type:"text",name:"input",wrap:"hard",placeholder:"Enter your message...",autoComplete:"off",autoFocus:!0}),n.a.createElement("button",{type:"submit"},n.a.createElement("img",{src:We.a,alt:""}))))}}]),a}(n.a.Component),Ve=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).UNSAFE_componentWillReceiveProps=function(t){t.roomId!==e.props.roomId&&(0,e.props.reset)()},e}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:this.props.activeAddUser?"dialogs__header-add-user dialogs__header-add-user_active":"dialogs__header-add-user"},n.a.createElement("form",{onSubmit:this.props.handleSubmit},n.a.createElement("div",{className:"dialogs__header-error-field-wrapper"},this.props.error&&n.a.createElement("div",{className:"error"},this.props.error),n.a.createElement("div",{className:"dialogs__header-input-new-user dialogs__header-control-form-item"},n.a.createElement(d.a,{placeholder:"UserName",type:"text",name:"text",id:"invite",component:b}))),n.a.createElement("button",{type:"submit",className:"dialogs__header-button-add-user dialogs__header-button dialogs__header-control-form-item"},"AddUser"),n.a.createElement("div",{className:"pop-up-buttonX buttonX control-button space",id:"buttonXAddUser",onClick:this.props.toggleActiveAddUser},n.a.createElement("span",null))))}}]),a}(n.a.Component),Be=Object(p.a)({form:"newUserToRoom"})(Ve),Ze=function(e){return n.a.createElement(Be,{onSubmit:function(t){e.addUserToRoom(e.roomId,t.text)},roomId:e.roomId,activeAddUser:e.activeAddUser,toggleActiveAddUser:e.toggleActiveAddUser})},He=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).RemoveUserFromRoom=function(e){e.preventDefault(),console.log("in message area"),r.props.toggleActiveClassRooms(),r.props.RemoveUserFromRoom(r.props.roomId,r.props.userName),r.props.setCurrentRoom(null,null)},r.state={activeAddUser:!1},r.toggleActiveAddUser=r.toggleActiveAddUser.bind(Object(we.a)(r)),r}return Object(c.a)(a,[{key:"toggleActiveAddUser",value:function(){this.setState((function(e){return{activeAddUser:!e.activeAddUser}}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"dialogs__header"},n.a.createElement("div",{onClick:this.props.toggleActiveClassRooms,className:"dialogs__header-burger control-button",id:"buttonBurger"},n.a.createElement("span",null)),n.a.createElement("div",{className:"dialogs__header-room-name"},this.props.roomName),n.a.createElement("div",{className:"dialogs__header-control-form"},n.a.createElement(Ze,{activeAddUser:this.state.activeAddUser,addUserToRoom:this.props.addUserToRoom,roomId:this.props.roomId,toggleActiveAddUser:this.toggleActiveAddUser}),n.a.createElement("div",{className:"dialogs__header-settings-sm-menu-wrapper"},n.a.createElement("div",{className:"dialogs__header-settings control-button"},n.a.createElement("span",null)),n.a.createElement("div",{className:"dialogs__header-settings-sm-menu-buttons"},n.a.createElement("button",{className:"dialogs__header-button-sm-add-user",id:"buttonAddUser",onClick:this.toggleActiveAddUser},"Add User"),n.a.createElement("button",{onClick:this.RemoveUserFromRoom,className:"dialogs__header-button-leave dialogs__header-button dialogs__header-control-item"},"Leave")))))}}]),a}(n.a.Component),Ye=a(141),Je=a.n(Ye),Ke=function(e){return n.a.createElement(Je.a,{className:"dialogs__messages"},e.messages.map((function(t){return n.a.createElement("div",{key:t.id,className:"dialogs__message"},n.a.createElement("div",{className:"dialogs__message-avatar"},n.a.createElement("img",{src:t.avatar,alt:"Avatar"})),n.a.createElement("div",{className:e.userName===t.username?"dialogs__message-text dialogs__my-message":"dialogs__message-text"},e.userName!==t.username&&n.a.createElement("p",null,t.username),t.message))})))},$e=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={timer:null},e.getMessages=function(){return e.props.getMessages(e.props.roomId)},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=setInterval((function(){return e.props.getMessages(e.props.roomId)}),500);this.setState({timer:t})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer),this.setState({timer:""})}},{key:"render",value:function(){return n.a.createElement("div",{className:"dialogs__message-area"},n.a.createElement(He,{roomName:this.props.roomName,addUserToRoom:this.props.addUserToRoom,roomId:this.props.roomId,RemoveUserFromRoom:this.props.RemoveUserFromRoom,setCurrentRoom:this.props.setCurrentRoom,userName:this.props.userName,toggleActiveClassRooms:this.props.toggleActiveClassRooms}),n.a.createElement(Ke,{messages:this.props.messages,userName:this.props.userName}),n.a.createElement(Xe,{roomId:this.props.roomId,addMessage:this.props.addMessage}))}}]),a}(n.a.Component),qe=Object(ie.compose)(Object(A.b)((function(e){return{messages:Ge(e),userName:null===e.profile.name?e.auth.name:e.profile.name,roomId:e.dialogs.currentRoomId,roomName:e.dialogs.currentRoomName}}),{addUserToRoom:function(e,t){return function(a){D(e,t).then((function(e){X(),a(Object(W.a)("newUserToRoom"))})).catch((function(e){var t=e.response.data.errors.length>0?e.response.data.errors[0]:"Some error";a(Object(W.b)("newUserToRoom",{_error:t}))}))}},RemoveUserFromRoom:Ie,addMessage:Te,getRooms:Fe,getMessages:Pe,setCurrentRoom:Ue}))($e),Qe=function(e){return n.a.createElement("div",{className:"dialogs__rooms-container"},e.rooms.map((function(t){return n.a.createElement("div",{className:e.roomId===t.id?"dialogs__room dialogs__room_selected":"dialogs__room",key:t.id,onClick:function(a){return function(t,a){a.preventDefault(),e.setCurrentRoom(t.id,t.name),e.toggleActiveClassRooms()}(t,a)}},t.name)})))},et=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={timer:null},e.getRooms=function(){return e.props.getRooms()},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getRooms();var t=setInterval((function(){return e.props.getRooms()}),2e3);this.setState({timer:t})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer),this.setState({timer:""})}},{key:"render",value:function(){return n.a.createElement(Qe,{rooms:this.props.rooms,setCurrentRoom:this.props.setCurrentRoom,roomId:this.props.roomId,toggleActiveClassRooms:this.props.toggleActiveClassRooms})}}]),a}(n.a.Component),tt=Object(ie.compose)(Object(A.b)((function(e){return{rooms:xe(e),roomId:e.dialogs.currentRoomId}}),{setCurrentRoom:Ue,getRooms:Fe}))(et),at=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).addRoom=function(e){return r.props.addRoom(e)},r.state={activeRooms:!0},r.toggleActiveClassRooms=r.toggleActiveClassRooms.bind(Object(we.a)(r)),r}return Object(c.a)(a,[{key:"toggleActiveClassRooms",value:function(){this.setState((function(e){return{activeRooms:!e.activeRooms}}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"Dialogs"},n.a.createElement(ge,null),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"dialogs"},n.a.createElement("div",{className:this.state.activeRooms?"dialogs__rooms dialogs__rooms_active":"dialogs__rooms"},n.a.createElement(ze,{addRoom:this.props.addRoom,toggleActiveClassRooms:this.toggleActiveClassRooms}),n.a.createElement(tt,{toggleActiveClassRooms:this.toggleActiveClassRooms})),this.props.currentRoomId?n.a.createElement(qe,{toggleActiveClassRooms:this.toggleActiveClassRooms}):n.a.createElement("div",{className:"alternativeText",onClick:this.toggleActiveClassRooms},"Choose or create a room"))))}}]),a}(n.a.Component),rt=Object(ie.compose)(Object(A.b)((function(e){return{userName:null===e.profile.name?e.auth.name:e.profile.name,currentRoomId:e.dialogs.currentRoomId}}),{RemoveUserFromRoom:Ie,addMessage:Te,addRoom:function(e){return function(){M(e).then(X()).catch((function(e){console.log(e.response)}))}},getRooms:Fe,getMessages:Pe,setCurrentRoom:Ue}),se)(at),nt=a(28),ot=a.n(nt),st=a(32),it=a.n(st),ct=function(){return n.a.createElement("div",{className:ot.a.container},n.a.createElement("div",{className:it()(ot.a.dash,ot.a.uno)}),n.a.createElement("div",{className:it()(ot.a.dash,ot.a.dos)}),n.a.createElement("div",{className:it()(ot.a.dash,ot.a.tres)}),n.a.createElement("div",{className:it()(ot.a.dash,ot.a.cuatro)}))},lt=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?n.a.createElement("div",{className:"app-wrapper"},n.a.createElement(u.b,{exact:!0,path:"/",render:function(){return n.a.createElement(Q,null)}}),n.a.createElement(u.b,{exact:!0,path:"/register",render:function(){return n.a.createElement(re,null)}}),n.a.createElement(u.b,{exact:!0,path:"/profile",render:function(){return n.a.createElement(_e,null)}}),n.a.createElement(u.b,{exact:!0,path:"/profile/edit",render:function(){return n.a.createElement(ye,null)}}),n.a.createElement(u.b,{exact:!0,path:"/dialogs",render:function(){return n.a.createElement(rt,null)}})):n.a.createElement(ct,null)}}]),a}(n.a.Component),mt=Object(ie.compose)(Object(u.f)(Object(A.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(Y());Promise.all([t]).then((function(){e({type:"INITIALIZED_SUCCESS"})}))}}})(lt)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ut=a(134),dt=a(142),pt=a(143),ht=Object(ie.combineReducers)({auth:K,profile:de,form:ut.a,dialogs:Me,app:B}),ft=Object(ie.createStore)((function(e,t){return"LOGOUT"===t.type&&(e=void 0),ht(e,t)}),Object(pt.composeWithDevTools)(Object(ie.applyMiddleware)(dt.a)));window.store=ft;var gt=ft;s.a.render(n.a.createElement($.a,null,n.a.createElement(A.a,{store:gt},n.a.createElement(mt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},36:function(e,t,a){}},[[169,1,2]]]);
//# sourceMappingURL=main.3b4bba81.chunk.js.map